<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H√¥te - QuizLive</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

    <!-- √âCRAN 1 : Cr√©er le quiz -->
    <div id="screen-create" class="screen active">
        <div class="host-container">
            <h1>üìù Cr√©e ton Quiz</h1>

            <div class="import-export-bar">
                <button onclick="exportQuiz()" class="btn btn-blue">
                    üì§ Exporter le quiz
                </button>
                <label class="btn btn-purple" for="import-file">
                    üì• Importer un quiz
                </label>
                <input 
                    type="file" 
                    id="import-file" 
                    accept=".json"
                    style="display:none"
                    onchange="importQuiz(event)"
                >
            </div>

            <div id="questions-list"></div>

            <div class="question-form">
                <h3>‚ûï Ajouter une question</h3>

                <input 
                    type="text" 
                    id="q-text" 
                    placeholder="La question..."
                    class="input-full"
                >

                <div class="answers-grid">
                    <input type="text" id="a-0" placeholder="‚ñ≤ R√©ponse 1" class="answer-input red">
                    <input type="text" id="a-1" placeholder="‚ô¶ R√©ponse 2" class="answer-input blue">
                    <input type="text" id="a-2" placeholder="‚óè R√©ponse 3" class="answer-input green">
                    <input type="text" id="a-3" placeholder="‚ñ† R√©ponse 4" class="answer-input yellow">
                </div>

                <div class="correct-select">
                    <label>‚úÖ Bonnes r√©ponses (plusieurs possibles) :</label>
                    <div class="correct-checkboxes">
                        <label class="check-label red">
                            <input type="checkbox" name="correct" value="0"> ‚ñ≤ R√©ponse 1
                        </label>
                        <label class="check-label blue">
                            <input type="checkbox" name="correct" value="1"> ‚ô¶ R√©ponse 2
                        </label>
                        <label class="check-label green">
                            <input type="checkbox" name="correct" value="2"> ‚óè R√©ponse 3
                        </label>
                        <label class="check-label yellow">
                            <input type="checkbox" name="correct" value="3"> ‚ñ† R√©ponse 4
                        </label>
                    </div>
                </div>

                <div class="timer-select">
                    <label>‚è±Ô∏è Temps :</label>
                    <select id="q-timer">
                        <option value="10">10 secondes</option>
                        <option value="20" selected>20 secondes</option>
                        <option value="30">30 secondes</option>
                        <option value="60">60 secondes</option>
                    </select>
                </div>

                <div class="points-select">
                    <label>üèÜ Points pour cette question :</label>
                    <div class="points-buttons">
                        <button type="button" class="point-btn active" data-points="100" onclick="selectPoints(this)">100</button>
                        <button type="button" class="point-btn" data-points="200" onclick="selectPoints(this)">200</button>
                        <button type="button" class="point-btn" data-points="500" onclick="selectPoints(this)">500</button>
                        <button type="button" class="point-btn" data-points="1000" onclick="selectPoints(this)">1000</button>
                    </div>
                    <div class="points-custom">
                        <input 
                            type="number" 
                            id="q-points" 
                            value="100" 
                            min="1" 
                            max="9999"
                            placeholder="Valeur personnalis√©e"
                        >
                        <span>pts</span>
                    </div>
                </div>

                <button onclick="addQuestion()" class="btn btn-orange">
                    ‚ûï Ajouter la question
                </button>
            </div>

            <button onclick="startLobby()" class="btn btn-green btn-big" id="start-btn" disabled>
                üöÄ Lancer la partie
            </button>
        </div>
    </div>

    <!-- √âCRAN 2 : Salle d'attente -->
    <div id="screen-lobby" class="screen">
        <div class="lobby-container">
            <h1>üéÆ Salle d'attente</h1>

            <div class="pin-display">
                <p>PIN de la partie :</p>
                <div class="pin-number" id="pin-display">------</div>
                <p class="pin-hint">Les joueurs entrent ce code sur la page d'accueil</p>
            </div>

            <div class="players-section">
                <h3>üë• Joueurs connect√©s (<span id="player-count">0</span>)</h3>
                <div id="players-grid" class="players-grid"></div>
            </div>

            <button onclick="launchGame()" class="btn btn-green btn-big">
                ‚ñ∂Ô∏è D√©marrer le quiz !
            </button>
        </div>
    </div>

    <!-- √âCRAN 3 : Question en cours -->
    <div id="screen-question" class="screen">
        <div class="question-screen">

            <div class="question-header">
                <span id="q-counter">Question 1/5</span>
                <div class="timer-circle">
                    <span id="timer-display">20</span>
                </div>
                <span id="q-score-count">0 r√©ponses</span>
            </div>

            <div class="question-points-badge">
                <span>üèÜ</span>
                <span id="current-q-points">100</span>
                <span>pts</span>
            </div>

            <div class="question-box">
                <h2 id="current-question">La question appara√Æt ici...</h2>
            </div>

            <div class="answers-display">
                <div class="answer-box red">
                    <span>‚ñ≤</span>
                    <p id="host-a-0"></p>
                    <span class="answer-count" id="count-0">0</span>
                </div>
                <div class="answer-box blue">
                    <span>‚ô¶</span>
                    <p id="host-a-1"></p>
                    <span class="answer-count" id="count-1">0</span>
                </div>
                <div class="answer-box green">
                    <span>‚óè</span>
                    <p id="host-a-2"></p>
                    <span class="answer-count" id="count-2">0</span>
                </div>
                <div class="answer-box yellow">
                    <span>‚ñ†</span>
                    <p id="host-a-3"></p>
                    <span class="answer-count" id="count-3">0</span>
                </div>
            </div>

        </div>
    </div>

    <!-- √âCRAN 4 : R√©sultats entre questions -->
    <div id="screen-results" class="screen">
        <div class="results-container">
            <h2>üìä R√©sultats</h2>
            <div id="scoreboard" class="scoreboard"></div>
            <button onclick="nextQuestion()" class="btn btn-orange btn-big" id="next-btn">
                ‚û°Ô∏è Question suivante
            </button>
        </div>
    </div>

    <!-- √âCRAN 5 : Fin du jeu + PODIUM -->
    <div id="screen-end" class="screen">
        <div class="end-container">

            <h1 style="font-size:2.8rem; margin-bottom:5px">üèÜ Fin du Quiz !</h1>
            <p style="color:#aaa; margin-bottom:40px">Voici le podium final</p>

            <!-- PODIUM -->
            <div class="podium-wrapper">

                <!-- 2√®me place -->
                <div class="podium-player" id="podium-2">
                    <div class="podium-crown">ü•à</div>
                    <img class="podium-avatar" id="podium-avatar-2" src="" alt="">
                    <div class="podium-name" id="podium-name-2">‚Äî</div>
                    <div class="podium-score" id="podium-score-2">0 pts</div>
                    <div class="podium-block podium-block-2">2</div>
                </div>

                <!-- 1√®re place -->
                <div class="podium-player podium-first" id="podium-1">
                    <div class="podium-crown">ü•á</div>
                    <img class="podium-avatar" id="podium-avatar-1" src="" alt="">
                    <div class="podium-name" id="podium-name-1">‚Äî</div>
                    <div class="podium-score" id="podium-score-1">0 pts</div>
                    <div class="podium-block podium-block-1">1</div>
                </div>

                <!-- 3√®me place -->
                <div class="podium-player" id="podium-3">
                    <div class="podium-crown">ü•â</div>
                    <img class="podium-avatar" id="podium-avatar-3" src="" alt="">
                    <div class="podium-name" id="podium-name-3">‚Äî</div>
                    <div class="podium-score" id="podium-score-3">0 pts</div>
                    <div class="podium-block podium-block-3">3</div>
                </div>

            </div>

            <!-- Classement complet -->
            <div class="full-ranking">
                <h3 style="margin-bottom:15px; color:#aaa">Classement complet</h3>
                <div id="final-scores" class="final-scores"></div>
            </div>

            <button onclick="window.location.href='index.html'" class="btn btn-green btn-big" style="margin-top:30px">
                üè† Retour √† l'accueil
            </button>

        </div>
    </div>

    <script src="https://unpkg.com/peerjs@1.5.1/dist/peerjs.min.js"></script>
    <script>
        function selectPoints(btn) {
            document.querySelectorAll('.point-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            document.getElementById('q-points').value = btn.dataset.points;
        }

        document.getElementById('q-points').addEventListener('input', () => {
            document.querySelectorAll('.point-btn').forEach(b => b.classList.remove('active'));
        });
    </script>
    <script src="js/host.js"></script>

</body>
</html>
